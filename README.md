# Flutter Quad Annotator

[![pub package](https://img.shields.io/pub/v/flutter_quad_annotator.svg)](https://pub.dev/packages/flutter_quad_annotator)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Flutter](https://img.shields.io/badge/Flutter-%3E%3D3.19.0-blue.svg)](https://flutter.dev/)
[![Dart](https://img.shields.io/badge/Dart-%5E3.2.0-blue.svg)](https://dart.dev/)

[![Platform](https://img.shields.io/badge/Platform-Android%20%7C%20iOS%20%7C%20Web%20%7C%20macOS%20%7C%20Windows%20%7C%20Linux-blue.svg)](https://flutter.dev/)
[![Support](https://img.shields.io/badge/Support-Mobile%20%7C%20Desktop%20%7C%20Web-green.svg)](https://flutter.dev/)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Flutter å››è¾¹å½¢æ ‡æ³¨å·¥å…·åŒ…ï¼Œæä¾›å¯æ‹–æ‹½çš„å››ç‚¹å®šä½å››è¾¹å½¢ç»„ä»¶ï¼Œæ”¯æŒæ”¾å¤§é•œã€ç²¾ç»†è°ƒæ•´ã€è‡ªåŠ¨æ£€æµ‹ç­‰ä¸°å¯ŒåŠŸèƒ½ã€‚

## ğŸ“± é¢„è§ˆ

### å¤šå¹³å°æ”¯æŒå±•ç¤º

<table>
  <tr>
    <td align="center">
      <img src="doc/images/demo-android.png" width="200" alt="Android Demo"/>
      <br/>
      <b>Android</b>
    </td>
    <td align="center">
      <img src="doc/images/demo-ios.png" width="200" alt="iOS Demo"/>
      <br/>
      <b>iOS</b>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="doc/images/demo-web.png" width="200" alt="Web Demo"/>
      <br/>
      <b>Web</b>
    </td>
    <td align="center">
      <img src="doc/images/demo-macos.png" width="200" alt="macOS Demo"/>
      <br/>
      <b>macOS</b>
    </td>
  </tr>
</table>

### ğŸŒ åœ¨çº¿æ¼”ç¤º

**[ç‚¹å‡»è¿™é‡Œä½“éªŒåœ¨çº¿æ¼”ç¤º](https://yj-labs.github.io/flutter_quad_annotator/)**

_æˆ–è€…è¿è¡Œæœ¬åœ°ç¤ºä¾‹åº”ç”¨æŸ¥çœ‹å®Œæ•´åŠŸèƒ½æ¼”ç¤º_

## åŠŸèƒ½ç‰¹æ€§

- âœ… **å››è¾¹å½¢é¡¶ç‚¹æ‹–æ‹½** - æ”¯æŒæ‹–æ‹½å››ä¸ªé¡¶ç‚¹æ¥è°ƒæ•´å››è¾¹å½¢å½¢çŠ¶
- âœ… **å››è¾¹å½¢è¾¹çº¿æ‹–æ‹½** - æ”¯æŒæ‹–æ‹½è¾¹çº¿æ¥ç§»åŠ¨æ•´ä¸ªå››è¾¹å½¢
- âœ… **æ”¾å¤§é•œåŠŸèƒ½** - æ‹–æ‹½æ—¶æ˜¾ç¤ºæ”¾å¤§é•œï¼Œä¾¿äºç²¾ç¡®å®šä½
- âœ… **ç²¾è°ƒæ¨¡å¼** - é•¿æŒ‰æˆ–åŒå‡»é¡¶ç‚¹è¿›å…¥ç²¾è°ƒæ¨¡å¼ï¼Œæ”¯æŒåƒç´ çº§ç²¾ç¡®è°ƒæ•´
- âœ… **è™šæ‹Ÿæ–¹å‘é”®** - ç²¾è°ƒæ¨¡å¼ä¸‹æ˜¾ç¤ºè™šæ‹Ÿæ–¹å‘é”®ï¼Œæ”¯æŒä¸Šä¸‹å·¦å³ç²¾ç¡®ç§»åŠ¨
- âœ… **é¡¶ç‚¹åˆ‡æ¢** - ç²¾è°ƒæ¨¡å¼ä¸‹å¯å¿«é€Ÿåˆ‡æ¢ä¸åŒé¡¶ç‚¹è¿›è¡Œè°ƒæ•´
- âœ… **äº¤äº’å¼æ•™ç¨‹ç³»ç»Ÿ** - å†…ç½®åˆ†æ­¥å¼•å¯¼æ•™ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŒæ¡æ‰€æœ‰åŠŸèƒ½
- âœ… **æ•™ç¨‹è‡ªå®šä¹‰** - æ”¯æŒè‡ªå®šä¹‰æ•™ç¨‹æ–‡æœ¬ã€é¢œè‰²ã€åŠ¨ç”»æ•ˆæœç­‰
- âœ… **æ™ºèƒ½ä½ç½®è®°å¿†** - è™šæ‹Ÿæ–¹å‘é”®é¢æ¿è®°ä½ç”¨æˆ·åå¥½ä½ç½®
- âœ… **å±å¹•æ—‹è½¬æ”¯æŒ** - å®Œç¾æ”¯æŒå±å¹•æ—‹è½¬ï¼Œæ‰€æœ‰ UI å…ƒç´ ä½ç½®æ™ºèƒ½æ›´æ–°
- âœ… **å‘¼å¸åŠ¨ç”»æ•ˆæœ** - å¯é…ç½®çš„å‘¼å¸ç¯åŠ¨ç”»ï¼Œæå‡è§†è§‰ä½“éªŒ
- âœ… **é«˜åº¦å¯å®šåˆ¶** - æ”¯æŒè‡ªå®šä¹‰é¢œè‰²ã€å¤§å°ã€æ ·å¼ç­‰
- âœ… **é…ç½®å¯¹è±¡åŒ–** - å‘¼å¸åŠ¨ç”»ã€æ”¾å¤§é•œã€ç²¾è°ƒæ¨¡å¼å’Œæ•™ç¨‹é…ç½®æŠ½è±¡ä¸ºç‹¬ç«‹å¯¹è±¡
- âœ… **äº‹ä»¶å›è°ƒ** - æä¾›ä¸°å¯Œçš„æ‹–æ‹½äº‹ä»¶å›è°ƒ
- âœ… **å•ç‚¹è§¦æ§** - æ™ºèƒ½çš„å•ç‚¹è§¦æ§è¯†åˆ«ï¼Œé¿å…å¤šç‚¹è§¦æ§å¹²æ‰°
- âœ… **æ€§èƒ½ä¼˜åŒ–** - æ™ºèƒ½çš„å°ºå¯¸å˜åŒ–æ£€æµ‹ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å»º

## ğŸ“‹ å¹³å°æ”¯æŒ

| å¹³å°       | æ”¯æŒçŠ¶æ€ | å¤‡æ³¨         |
| ---------- | -------- | ------------ |
| âœ… Android | å®Œå…¨æ”¯æŒ | API 16+      |
| âœ… iOS     | å®Œå…¨æ”¯æŒ | iOS 9.0+     |
| âœ… Web     | å®Œå…¨æ”¯æŒ | ç°ä»£æµè§ˆå™¨   |
| âœ… macOS   | å®Œå…¨æ”¯æŒ | macOS 10.11+ |
| âœ… Windows | å®Œå…¨æ”¯æŒ | Windows 7+   |
| âœ… Linux   | å®Œå…¨æ”¯æŒ | ä¸»æµå‘è¡Œç‰ˆ   |

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

åœ¨ä½ çš„ `pubspec.yaml` æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š

````yaml
```yaml
dependencies:
  flutter_quad_annotator: ^0.3.0
````

ç„¶åè¿è¡Œï¼š

```bash
flutter pub get
```

### å¯¼å…¥

```dart
import 'package:flutter_quad_annotator/flutter_quad_annotator.dart';
```

## åŸºæœ¬ç”¨æ³•

```dart
QuadAnnotatorBox(
  backgroundColor: Colors.grey[100]!,
  onVerticesChanged: (QuadAnnotation rectangle) {
    print('å››è¾¹å½¢é¡¶ç‚¹å·²æ›´æ–°: ${rectangle.vertices}');
  },
  breathing: const BreathingAnimation(
    enabled: true,
    color: Colors.white,
    duration: Duration(seconds: 2),
  ),
  magnifier: const MagnifierConfiguration(
    enabled: true,
    radius: 60.0,
    magnification: 2.0,
  ),
  fineAdjustment: const FineAdjustmentConfiguration(
    mode: FineAdjustmentMode.both, // æ”¯æŒé•¿æŒ‰å’ŒåŒå‡»
    dpadConfig: VirtualDPadConfiguration(
      enabled: true,
      size: 40.0,
      stepSize: 1.0,
      position: Alignment.bottomRight,
    ),
  ),
  tutorial: const TutorialConfiguration(
    enabled: true,
    autoStart: false, // æ‰‹åŠ¨å¯åŠ¨æ•™ç¨‹
    overlayColor: Color(0xCC000000),
    skipButtonText: 'è·³è¿‡',
    hintStyle: TextStyle(
      color: Colors.white,
      fontSize: 16,
      fontWeight: FontWeight.w500,
    ),
    enablePulseAnimation: true,
    pulseColor: Colors.orange,
  ),
  vertexColor: Colors.blue,
  borderColor: Colors.red,
)
```

## å®Œæ•´ç¤ºä¾‹

æŸ¥çœ‹ `/example` æ–‡ä»¶å¤¹ä¸­çš„å®Œæ•´ç¤ºä¾‹åº”ç”¨ï¼Œæ¼”ç¤ºäº†æ‰€æœ‰åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•ï¼š

```bash
cd example
flutter pub get
flutter run
```

ç¤ºä¾‹åº”ç”¨åŒ…å«ï¼š

- äº¤äº’å¼æ§åˆ¶é¢æ¿
- å®æ—¶åæ ‡æ˜¾ç¤º
- æ‰€æœ‰é…ç½®é€‰é¡¹çš„æ¼”ç¤º
- äº‹ä»¶å›è°ƒçš„ä½¿ç”¨ç¤ºä¾‹

## API æ–‡æ¡£

### QuadAnnotatorBox

ä¸»è¦çš„å››è¾¹å½¢æ ‡æ³¨ç»„ä»¶ã€‚

#### ä¸»è¦å‚æ•°

| å‚æ•°                | ç±»å‹                           | é»˜è®¤å€¼                     | è¯´æ˜                     |
| ------------------- | ------------------------------ | -------------------------- | ------------------------ |
| `image`             | `ui.Image?`                    | `null`                     | èƒŒæ™¯å›¾ç‰‡å¯¹è±¡             |
| `imageProvider`     | `ImageProvider?`               | `null`                     | å›¾ç‰‡æä¾›è€…               |
| `width`             | `double?`                      | `null`                     | ç»„ä»¶å®½åº¦ï¼ˆå¯é€‰ï¼Œè‡ªé€‚åº”ï¼‰ |
| `height`            | `double?`                      | `null`                     | ç»„ä»¶é«˜åº¦ï¼ˆå¯é€‰ï¼Œè‡ªé€‚åº”ï¼‰ |
| `backgroundColor`   | `Color`                        | `Colors.transparent`       | èƒŒæ™¯é¢œè‰²                 |
| `rectangle`         | `QuadAnnotation?`              | `null`                     | åˆå§‹å››è¾¹å½¢               |
| `onVerticesChanged` | `OnVerticesChanged?`           | `null`                     | é¡¶ç‚¹å˜åŒ–å›è°ƒ             |
| `breathing`         | `BreathingAnimation`           | `BreathingAnimation()`     | å‘¼å¸åŠ¨ç”»é…ç½®             |
| `magnifier`         | `MagnifierConfiguration`       | `MagnifierConfiguration()` | æ”¾å¤§é•œé…ç½®               |
| `fineAdjustment`    | `FineAdjustmentConfiguration?` | `null`                     | ç²¾è°ƒæ¨¡å¼é…ç½®             |
| `tutorial`          | `TutorialConfiguration?`       | `null`                     | æ•™ç¨‹ç³»ç»Ÿé…ç½®             |
| `vertexRadius`      | `double`                       | `8.0`                      | é¡¶ç‚¹åŠå¾„                 |
| `borderWidth`       | `double`                       | `2.0`                      | è¾¹æ¡†å®½åº¦                 |
| `vertexColor`       | `Color`                        | `Colors.white`             | é¡¶ç‚¹é¢œè‰²                 |
| `borderColor`       | `Color`                        | `Colors.white`             | è¾¹æ¡†é¢œè‰²                 |
| `autoDetect`        | `bool`                         | `true`                     | æ˜¯å¦è‡ªåŠ¨æ£€æµ‹çŸ©å½¢         |
| `preview`           | `bool`                         | `false`                    | æ˜¯å¦ä¸ºé¢„è§ˆæ¨¡å¼           |
| `controller`        | `QuadAnnotatorController?`     | `null`                     | å¤–éƒ¨æ§åˆ¶å™¨               |

### QuadAnnotation

å››è¾¹å½¢æ ‡æ³¨ç±»ï¼Œç”¨äºå­˜å‚¨å’Œæ“ä½œå››ä¸ªé¡¶ç‚¹åæ ‡ã€‚

```dart
// åˆ›å»ºå››è¾¹å½¢
final rectangle = QuadAnnotation(
  topLeft: Point<double>(10, 10),
  topRight: Point<double>(100, 10),
  bottomRight: Point<double>(100, 100),
  bottomLeft: Point<double>(10, 100),
);

// ä»é¡¶ç‚¹åˆ—è¡¨åˆ›å»º
final rectangle = QuadAnnotation.fromVertices([
  Point<double>(10, 10),
  Point<double>(100, 10),
  Point<double>(100, 100),
  Point<double>(10, 100),
]);

// è·å–é¡¶ç‚¹åˆ—è¡¨
List<Point<double>> vertices = rectangle.vertices;

// è·å–è¾¹ç•ŒçŸ©å½¢
Rect bounds = rectangle.bounds;
```

## é«˜çº§é…ç½®

### BreathingAnimation é…ç½®

å‘¼å¸åŠ¨ç”»é…ç½®ç±»ï¼Œç”¨äºæ§åˆ¶å››è¾¹å½¢çš„å‘¼å¸ç¯æ•ˆæœã€‚

```dart
QuadAnnotatorBox(
  breathing: const BreathingAnimation(
    enabled: true,
    color: Colors.white,
    duration: Duration(seconds: 2),
    opacityMin: 0.2,
    opacityMax: 0.9,
    spacing: 4.0,
    strokeWidth: 2.0,
  ),
)
```

#### BreathingAnimation å‚æ•°

| å‚æ•°          | ç±»å‹       | é»˜è®¤å€¼                 | è¯´æ˜             |
| ------------- | ---------- | ---------------------- | ---------------- |
| `enabled`     | `bool`     | `false`                | æ˜¯å¦å¯ç”¨å‘¼å¸åŠ¨ç”» |
| `color`       | `Color`    | `Colors.white`         | å‘¼å¸åŠ¨ç”»é¢œè‰²     |
| `duration`    | `Duration` | `Duration(seconds: 2)` | åŠ¨ç”»æŒç»­æ—¶é—´     |
| `opacityMin`  | `double`   | `0.2`                  | æœ€å°é€æ˜åº¦       |
| `opacityMax`  | `double`   | `0.9`                  | æœ€å¤§é€æ˜åº¦       |
| `spacing`     | `double`   | `4.0`                  | å‘¼å¸çº¿é—´è·       |
| `strokeWidth` | `double`   | `2.0`                  | å‘¼å¸çº¿å®½åº¦       |

### MagnifierConfiguration é…ç½®

æ”¾å¤§é•œé…ç½®ç±»ï¼Œç”¨äºæ§åˆ¶æ‹–æ‹½æ—¶çš„æ”¾å¤§é•œæ•ˆæœã€‚

```dart
QuadAnnotatorBox(
  magnifier: const MagnifierConfiguration(
    enabled: true,
    radius: 60.0,
    magnification: 2.0,
    borderColor: Colors.white,
    borderWidth: 3.0,
    crosshairColor: Colors.white,
    crosshairRadiusRatio: 0.8,
    positionMode: MagnifierPositionMode.edge,
    cornerPosition: MagnifierCornerPosition.topRight,
    edgeOffset: Offset(20.0, 20.0),
    shape: MagnifierShape.circle,
  ),
)
```

#### MagnifierConfiguration å‚æ•°

| å‚æ•°                   | ç±»å‹                      | é»˜è®¤å€¼                             | è¯´æ˜             |
| ---------------------- | ------------------------- | ---------------------------------- | ---------------- |
| `enabled`              | `bool`                    | `false`                            | æ˜¯å¦å¯ç”¨æ”¾å¤§é•œ   |
| `radius`               | `double`                  | `60.0`                             | æ”¾å¤§é•œåŠå¾„       |
| `magnification`        | `double`                  | `2.0`                              | æ”¾å¤§å€æ•°         |
| `borderColor`          | `Color`                   | `Colors.white`                     | è¾¹æ¡†é¢œè‰²         |
| `borderWidth`          | `double`                  | `3.0`                              | è¾¹æ¡†å®½åº¦         |
| `crosshairColor`       | `Color`                   | `Colors.white`                     | åå­—çº¿é¢œè‰²       |
| `crosshairRadiusRatio` | `double`                  | `0.8`                              | åå­—çº¿åŠå¾„æ¯”ä¾‹   |
| `positionMode`         | `MagnifierPositionMode`   | `MagnifierPositionMode.edge`       | ä½ç½®æ¨¡å¼         |
| `cornerPosition`       | `MagnifierCornerPosition` | `MagnifierCornerPosition.topRight` | è§’è½ä½ç½®         |
| `edgeOffset`           | `Offset`                  | `Offset(20.0, 20.0)`               | äºŒç»´è¾¹ç¼˜åç§»å‘é‡ |
| `shape`                | `MagnifierShape`          | `MagnifierShape.circle`            | æ”¾å¤§é•œå½¢çŠ¶       |

### TutorialConfiguration é…ç½®

æ•™ç¨‹é…ç½®ç±»ï¼Œç”¨äºæ§åˆ¶äº¤äº’å¼æ•™ç¨‹ç³»ç»Ÿçš„å¤–è§‚å’Œè¡Œä¸ºã€‚

```dart
QuadAnnotatorBox(
  tutorial: const TutorialConfiguration(
    enabled: true,
    autoStart: false,
    overlayColor: Color(0xCC000000),
    skipButtonText: 'Skip',
    hintStyle: TextStyle(
      color: Colors.white,
      fontSize: 16,
      fontWeight: FontWeight.w500,
    ),
    hintBackgroundColor: Colors.transparent,
    spotlightPadding: 20.0,
    startDelay: Duration(milliseconds: 1000),
    stepInterval: Duration(milliseconds: 800),
    enablePulseAnimation: true,
    pulseColor: Colors.orange,
    stepTexts: {
      TutorialStep.dragVertex: 'Drag the highlighted vertex to adjust the quadrilateral shape.',
      TutorialStep.longPressVertex: 'Long press the highlighted vertex to enter precision mode.',
      // ... å…¶ä»–æ­¥éª¤æ–‡æœ¬
    },
  ),
)
```

#### TutorialConfiguration å‚æ•°

| å‚æ•°                         | ç±»å‹                        | é»˜è®¤å€¼                         | è¯´æ˜                   |
| ---------------------------- | --------------------------- | ------------------------------ | ---------------------- |
| `enabled`                    | `bool`                      | `true`                         | æ˜¯å¦å¯ç”¨æ•™ç¨‹ç³»ç»Ÿ       |
| `autoStart`                  | `bool`                      | `false`                        | æ˜¯å¦è‡ªåŠ¨å¼€å§‹æ•™ç¨‹       |
| `overlayColor`               | `Color`                     | `Color(0xCC000000)`            | é®ç½©å±‚é¢œè‰²             |
| `skipButtonText`             | `String`                    | `'Skip'`                       | è·³è¿‡æŒ‰é’®æ–‡æœ¬           |
| `skipButtonStyle`            | `ButtonStyle?`              | `null`                         | è·³è¿‡æŒ‰é’®æ ·å¼           |
| `hintStyle`                  | `TextStyle`                 | ç™½è‰² 16 å·å­—ä½“                 | å¼•å¯¼æç¤ºæ–‡æœ¬æ ·å¼       |
| `hintBackgroundColor`        | `Color`                     | `Colors.transparent`           | å¼•å¯¼æç¤ºèƒŒæ™¯é¢œè‰²       |
| `hintBorderRadius`           | `double`                    | `8.0`                          | å¼•å¯¼æç¤ºåœ†è§’åŠå¾„       |
| `hintPadding`                | `EdgeInsets`                | `EdgeInsets.zero`              | å¼•å¯¼æç¤ºå†…è¾¹è·         |
| `hintContainerMargin`        | `double`                    | `20.0`                         | å¼•å¯¼æç¤ºå®¹å™¨è¾¹è·       |
| `hintEstimatedHeight`        | `double`                    | `150.0`                        | å¼•å¯¼æç¤ºå®¹å™¨é¢„ä¼°é«˜åº¦   |
| `connectionLineLength`       | `double`                    | `60.0`                         | è¿æ¥çº¿é•¿åº¦             |
| `iconSize`                   | `double`                    | `56.0`                         | å›¾æ ‡å°ºå¯¸               |
| `lineToIconDistance`         | `double`                    | `20.0`                         | è¿æ¥çº¿åˆ°å›¾æ ‡çš„é—´è·     |
| `iconToTextDistance`         | `double`                    | `12.0`                         | å›¾æ ‡åˆ°æ–‡æœ¬çš„é—´è·       |
| `spotlightPadding`           | `double`                    | `20.0`                         | èšå…‰ç¯è¾¹è·             |
| `spotlightAnimationDuration` | `Duration`                  | `Duration(milliseconds: 800)`  | èšå…‰ç¯åŠ¨ç”»æŒç»­æ—¶é—´     |
| `highlightBorderColor`       | `Color`                     | `Colors.orange`                | é«˜äº®è¾¹æ¡†é¢œè‰²           |
| `highlightBorderWidth`       | `double`                    | `3.0`                          | é«˜äº®è¾¹æ¡†å®½åº¦           |
| `enablePulseAnimation`       | `bool`                      | `true`                         | æ˜¯å¦å¯ç”¨è„‰å†²åŠ¨ç”»       |
| `pulseColor`                 | `Color`                     | `Colors.orange`                | è„‰å†²åŠ¨ç”»é¢œè‰²           |
| `pulseAnimationDuration`     | `Duration`                  | `Duration(milliseconds: 2000)` | è„‰å†²åŠ¨ç”»æŒç»­æ—¶é—´       |
| `startDelay`                 | `Duration`                  | `Duration(milliseconds: 1000)` | å¼•å¯¼å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´     |
| `stepInterval`               | `Duration`                  | `Duration(milliseconds: 800)`  | å¼•å¯¼æ­¥éª¤ä¹‹é—´çš„é—´éš”æ—¶é—´ |
| `stepTexts`                  | `Map<TutorialStep, String>` | é»˜è®¤è‹±æ–‡æ–‡æœ¬                   | æ¯ä¸ªæ­¥éª¤çš„å¼•å¯¼æ–‡æœ¬     |
| `stepSpotlightPadding`       | `Map<TutorialStep, double>` | å„æ­¥éª¤é»˜è®¤è¾¹è·                 | æ¯ä¸ªæ­¥éª¤çš„èšå…‰ç¯è¾¹è·   |

### FineAdjustmentConfiguration é…ç½®

ç²¾è°ƒæ¨¡å¼é…ç½®ç±»ï¼Œç”¨äºæ§åˆ¶ç²¾è°ƒæ¨¡å¼çš„è¡Œä¸ºå’Œè™šæ‹Ÿæ–¹å‘é”®ã€‚

```dart
QuadAnnotatorBox(
  fineAdjustment: const FineAdjustmentConfiguration(
    mode: FineAdjustmentMode.both, // æ”¯æŒé•¿æŒ‰å’ŒåŒå‡»
    longPressDuration: Duration(milliseconds: 500),
    dpadConfig: VirtualDPadConfiguration(
      enabled: true,
      size: 40.0,
      stepSize: 1.0,
      spacing: 8.0,
      position: Alignment.bottomRight,
      backgroundColor: Colors.black54,
      borderColor: Colors.white,
      iconColor: Colors.white,
      opacity: 0.8,
      borderRadius: 8.0,
      borderWidth: 1.0,
    ),
  ),
)
```

#### FineAdjustmentConfiguration å‚æ•°

| å‚æ•°                | ç±»å‹                       | é»˜è®¤å€¼                         | è¯´æ˜             |
| ------------------- | -------------------------- | ------------------------------ | ---------------- |
| `mode`              | `FineAdjustmentMode`       | `FineAdjustmentMode.longPress` | ç²¾è°ƒæ¨¡å¼è§¦å‘æ–¹å¼ |
| `longPressDuration` | `Duration`                 | `Duration(milliseconds: 500)`  | é•¿æŒ‰è§¦å‘æ—¶é•¿     |
| `dpadConfig`        | `VirtualDPadConfiguration` | `VirtualDPadConfiguration()`   | è™šæ‹Ÿæ–¹å‘é”®é…ç½®   |

#### VirtualDPadConfiguration å‚æ•°

| å‚æ•°              | ç±»å‹        | é»˜è®¤å€¼                  | è¯´æ˜               |
| ----------------- | ----------- | ----------------------- | ------------------ |
| `enabled`         | `bool`      | `true`                  | æ˜¯å¦å¯ç”¨è™šæ‹Ÿæ–¹å‘é”® |
| `size`            | `double`    | `40.0`                  | æ–¹å‘é”®æŒ‰é’®å¤§å°     |
| `stepSize`        | `double`    | `1.0`                   | æ¯æ¬¡ç§»åŠ¨çš„åƒç´ æ­¥é•¿ |
| `spacing`         | `double`    | `8.0`                   | æŒ‰é’®é—´è·           |
| `position`        | `Alignment` | `Alignment.bottomRight` | æ–¹å‘é”®é¢æ¿ä½ç½®     |
| `backgroundColor` | `Color`     | `Colors.black54`        | èƒŒæ™¯é¢œè‰²           |
| `borderColor`     | `Color`     | `Colors.white`          | è¾¹æ¡†é¢œè‰²           |
| `iconColor`       | `Color`     | `Colors.white`          | å›¾æ ‡é¢œè‰²           |
| `opacity`         | `double`    | `0.8`                   | é€æ˜åº¦             |
| `borderRadius`    | `double`    | `8.0`                   | åœ†è§’åŠå¾„           |
| `borderWidth`     | `double`    | `1.0`                   | è¾¹æ¡†å®½åº¦           |

#### FineAdjustmentMode æšä¸¾

- `FineAdjustmentMode.longPress` - ä»…æ”¯æŒé•¿æŒ‰è¿›å…¥ç²¾è°ƒæ¨¡å¼
- `FineAdjustmentMode.doubleTap` - ä»…æ”¯æŒåŒå‡»è¿›å…¥ç²¾è°ƒæ¨¡å¼
- `FineAdjustmentMode.both` - åŒæ—¶æ”¯æŒé•¿æŒ‰å’ŒåŒå‡»è¿›å…¥ç²¾è°ƒæ¨¡å¼

### QuadAnnotatorController æ§åˆ¶å™¨

æ§åˆ¶å™¨ç±»ï¼Œç”¨äºå¤–éƒ¨æ§åˆ¶å››è¾¹å½¢æ ‡æ³¨ç»„ä»¶çš„è¡Œä¸ºã€‚

```dart
final controller = QuadAnnotatorController();

QuadAnnotatorBox(
  controller: controller,
  // ... å…¶ä»–é…ç½®
)

// è·å–å½“å‰é¡¶ç‚¹åæ ‡ï¼ˆå›¾ç‰‡åæ ‡ç³»ï¼‰
List<Point<double>>? vertices = controller.getImageVertices();

// é‡ç½®å››è¾¹å½¢åˆ°åˆå§‹çŠ¶æ€
controller.reset();

// æ£€æŸ¥æ˜¯å¦æ­£åœ¨æ‹–æ‹½
bool isDragging = controller.isDragging();

// æ‰‹åŠ¨å¯åŠ¨æ•™ç¨‹
controller.startTutorial();
```

#### QuadAnnotatorController æ–¹æ³•

| æ–¹æ³•                 | è¿”å›ç±»å‹               | è¯´æ˜                   |
| -------------------- | ---------------------- | ---------------------- |
| `getImageVertices()` | `List<Point<double>>?` | è·å–å›¾ç‰‡åæ ‡ç³»ä¸­çš„é¡¶ç‚¹ |
| `reset()`            | `void`                 | é‡ç½®å››è¾¹å½¢åˆ°åˆå§‹çŠ¶æ€   |
| `isDragging()`       | `bool`                 | æ£€æŸ¥æ˜¯å¦æ­£åœ¨æ‹–æ‹½       |
| `startTutorial()`    | `void`                 | æ‰‹åŠ¨å¯åŠ¨æ•™ç¨‹ç³»ç»Ÿ       |

### äº‹ä»¶å›è°ƒ

```dart
QuadAnnotatorBox(
  onVerticesChanged: (rectangle) {
    // å››è¾¹å½¢é¡¶ç‚¹å˜åŒ–
  },
  onVertexDragStart: (vertexIndex, position) {
    // å¼€å§‹æ‹–æ‹½é¡¶ç‚¹
  },
  onVertexDragEnd: (vertexIndex, position) {
    // ç»“æŸæ‹–æ‹½é¡¶ç‚¹
  },
  onEdgeDragStart: (edgeIndex, position) {
    // å¼€å§‹æ‹–æ‹½è¾¹çº¿
  },
  onEdgeDragEnd: (edgeIndex, position) {
    // ç»“æŸæ‹–æ‹½è¾¹çº¿
  },
)
```

## ğŸš€ æ€§èƒ½ç‰¹æ€§

- **é«˜æ•ˆæ¸²æŸ“**: ä½¿ç”¨è‡ªå®šä¹‰ `CustomPainter` å®ç°é«˜æ€§èƒ½ç»˜åˆ¶
- **å†…å­˜ä¼˜åŒ–**: æ™ºèƒ½çš„çŠ¶æ€ç®¡ç†ï¼Œé¿å…ä¸å¿…è¦çš„é‡å»º
- **æµç•…äº¤äº’**: 60fps çš„æ‹–æ‹½ä½“éªŒï¼Œæ”¯æŒé«˜åˆ·æ–°ç‡è®¾å¤‡
- **å“åº”å¼è®¾è®¡**: è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸å’Œåƒç´ å¯†åº¦

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ‹–æ‹½æ—¶å‡ºç°å¡é¡¿æ€ä¹ˆåŠï¼Ÿ**
A: ç¡®ä¿åœ¨ `onVerticesChanged` å›è°ƒä¸­é¿å…æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨é˜²æŠ–æˆ–èŠ‚æµæŠ€æœ¯ã€‚

**Q: å¦‚ä½•ç¦ç”¨æŸäº›äº¤äº’åŠŸèƒ½ï¼Ÿ**
A: ä½¿ç”¨ `preview: true` å‚æ•°å¯ä»¥ç¦ç”¨æ‰€æœ‰äº¤äº’åŠŸèƒ½ã€‚

**Q: è‡ªåŠ¨æ£€æµ‹ä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ**
A: å¯ä»¥è®¾ç½® `autoDetect: false` ç¦ç”¨è‡ªåŠ¨æ£€æµ‹ï¼Œæˆ–è€…æä¾›è‡ªå®šä¹‰çš„åˆå§‹çŸ©å½¢ `rectangle`ã€‚

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é¿å…é¢‘ç¹é‡å»º**: å°† `QuadAnnotatorBox` åŒ…è£…åœ¨ `const` æ„é€ å‡½æ•°ä¸­
2. **åˆç†ä½¿ç”¨å›è°ƒ**: åªç›‘å¬å¿…è¦çš„äº‹ä»¶ï¼Œé¿å…åœ¨å›è°ƒä¸­æ‰§è¡Œé‡æ“ä½œ
3. **å†…å­˜ç®¡ç†**: åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æºï¼Œç‰¹åˆ«æ˜¯å¤§å›¾åƒæ•°æ®

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork** æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª **Pull Request**

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yj-labs/flutter_quad_annotator.git
cd flutter_quad_annotator

# å®‰è£…ä¾èµ–
flutter pub get

# è¿è¡Œæµ‹è¯•
flutter test

# è¿è¡Œç¤ºä¾‹
cd example
flutter pub get
flutter run
```

### ä»£ç è§„èŒƒ

- éµå¾ª [Dart Style Guide](https://dart.dev/guides/language/effective-dart/style)
- ä½¿ç”¨ `flutter analyze` æ£€æŸ¥ä»£ç è´¨é‡
- ä¸ºæ–°åŠŸèƒ½æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ [rectangle_detector](https://pub.dev/packages/rectangle_detector) æä¾›çš„è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒ

## ğŸ“ è”ç³»æˆ‘ä»¬

- **Issues**: [GitHub Issues](https://github.com/yj-labs/flutter_quad_annotator/issues)
- **Discussions**: [GitHub Discussions](https://github.com/yj-labs/flutter_quad_annotator/discussions)
- **Email**: yongtaisin@qq.com

---

<div align="center">
  <p>å¦‚æœè¿™ä¸ªåŒ…å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸</p>
  <p>Made with â¤ï¸ by Flutter Community</p>
</div>
